!function(o){o(document).ready(function(){var a,n=o(".modal.carousel.slide.gallery, .modal.carousel.slide.popup"),e=o(".modal.modal-fullscreen"),d=o(".modal.mobile-modal"),l=o(".modal.popup"),i=o(".modal.modal-content-box"),s=o(".carousel.slide.subpage,.carousel.slide.mobile"),t=!0;s.on("slide.bs.carousel",function(a){var n;n=o(a.relatedTarget).find("img[data-original]"),n.attr("src",n.data("original")),n.removeAttr("data-src")}),n.on("slide.bs.carousel",function(a){var n;n=o(a.relatedTarget).find("img[data-original]"),n.attr("src",n.data("original")),n.removeAttr("data-src")}),n.on("slid.bs.carousel",function(a){var n,e=a.relatedTarget,d=o(e).find(".videoWrapper").length>0;if(d){var l=o(e).find("iframe").get(0);n=$f(l);var i=o(e).find(".video-play-button");n.addEvent("ready",function(){alert("ready"),n.addEvent("pause",function(){i.fadeIn()}),n.addEvent("play",function(){i.fadeOut()})}),t&&(n.api("play"),t=!1),i.bind("click",function(){n.api("play")})}else void 0!=n&&n.api("pause")}),n.on("show.bs.modal",function(a){var n=3040+10*o(".modal:visible").length;o(this).css("z-index",n),setTimeout(function(){o(".modal-backdrop").addClass("modal-backdrop-gallery").css("z-index",3035)},0)}),n.on("hide.bs.modal",function(){void 0!=a&&a.api("unload"),t=!0}),e.on("show.bs.modal",function(a){console.log("full show"),o(".modal-fullscreen.fade.in").modal("hide");var n=1040+10*o(".modal:visible").length;o(this).css("z-index",n),o(this).focus()}),d.on("show.bs.modal",function(a){console.log("mobile show");var n=1040+10*o(".modal:visible").length;o(this).css("z-index",n)}),l.on("show.bs.modal",function(o){console.log("popup mobile show")}),e.on("shown.bs.modal",function(a){o("body").css("overflow","hidden"),o(this).css("overflow","hidden");var n=a.currentTarget;if("contact"==o(n).attr("id")){var e=o(window),d=[],l=o("#toronto-map, #london-map").lazyLoadGoogleMaps({api_key:"AIzaSyD_VREr-We898pVftz2T3c9EU7kKkylSPs",callback:function(a,n){var e=o(a),l=new google.maps.LatLng(e.attr("data-lat"),e.attr("data-lng"));n.setOptions({zoom:15,center:l}),new google.maps.Marker({position:l,map:n,animation:google.maps.Animation.DROP,draggable:!0}),o.data(n,"center",l),d.push(n)}});e.on("resize",l.debounce(1e3,function(){o.each(d,function(){this.setCenter(o.data(this,"center"))})}))}}),i.on("shown.bs.modal",function(a){o("body").css("overflow","hidden"),o(this).css("overflow","hidden")}),d.on("shown.bs.modal",function(a){console.log("mobile shown"),o("body").css("overflow","hidden"),o(this).css("overflow","auto")}),e.on("hide.bs.modal",function(o){}),d.on("hide.bs.modal",function(o){console.log("mobile hide")}),e.on("hidden.bs.modal",function(a){o("body").css("overflow","auto")}),d.on("hidden.bs.modal",function(a){o("body").css("overflow","auto")}),l.on("hidden.bs.modal",function(a){o("body").css("overflow","auto")})})}(jQuery);