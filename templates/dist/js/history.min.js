!function(e){if("function"==typeof define&&define.amd){var t="[history"+(new Date).getTime()+"]",n=requirejs.onError;e.toString=function(){return t},requirejs.onError=function(e){-1===e.message.indexOf(t)&&n.call(requirejs,e)},define([],e)}return"object"!=typeof exports||"undefined"==typeof module?e():void(module.exports=e())}(function(){function e(e,t){var n=m.history!==w;n&&(m.history=w),e.apply(w,t),n&&(m.history=j)}function t(){}function n(e,t,r){if(e==v||""===e||t)e=t?e:S.href,(!T||r)&&(e=e.replace(/^[^#]*/,"")||"#",e=S.protocol.replace(/:.*$|$/,":")+"//"+S.host+U.basepath+e.replace(RegExp("^#[/]?(?:"+U.type+")?"),""));else{var t=n(),i=b.getElementsByTagName("base")[0];!r&&i&&i.getAttribute("href")&&(i.href=i.href,t=n(i.href,v,g)),r=t.d,i=t.h,e=""+e,e=/^(?:\w+\:)?\/\//.test(e)?0===e.indexOf("/")?i+e:e:i+"//"+t.g+(0===e.indexOf("/")?e:0===e.indexOf("?")?r+e:0===e.indexOf("#")?r+t.e+e:r.replace(/[^\/]+$/g,"")+e)}C.href=e;var e=/(?:(\w+\:))?(?:\/\/(?:[^@]*@)?([^\/:\?#]+)(?::([0-9]+))?)?([^\?#]*)(?:(\?[^#]+)|\?)?(?:(#.*))?/.exec(C.href),t=e[2]+(e[3]?":"+e[3]:""),r=e[4]||"/",i=e[5]||"",a="#"===e[6]?"":e[6]||"",o=r+i+a,c=r.replace(RegExp("^"+U.basepath,"i"),U.type)+i;return{b:e[1]+"//"+t+o,h:e[1],g:t,i:e[2],k:e[3]||"",d:r,e:i,a:a,c:o,j:c,f:c+a}}function r(){var e;try{e=m.sessionStorage,e.setItem(V+"t","1"),e.removeItem(V+"t")}catch(t){e={getItem:function(e){return e=b.cookie.split(e+"="),1<e.length&&e.pop().split(";").shift()||"null"},setItem:function(e){var t={};(t[S.href]=j.state)&&(b.cookie=e+"="+O.stringify(t))}}}try{H=O.parse(e.getItem(V))||{}}catch(n){H={}}q(P+"unload",function(){e.setItem(V,O.stringify(H))},y)}function i(e,n,r,i){var a=0;r||(r={set:t},a=1);var o=!r.set,c=!r.get,f={configurable:g,set:function(){o=1},get:function(){c=1}};try{I(e,n,f),e[n]=e[n],I(e,n,r)}catch(s){}if(!(o&&c||(e.__defineGetter__&&(e.__defineGetter__(n,f.get),e.__defineSetter__(n,f.set),e[n]=e[n],r.get&&e.__defineGetter__(n,r.get),r.set&&e.__defineSetter__(n,r.set)),o&&c))){if(a)return y;if(e===m){try{var p=e[n];e[n]=v}catch(u){}if("execScript"in m)m.execScript("Public "+n,"VBScript"),m.execScript("var "+n+";","JavaScript");else try{I(e,n,{value:t})}catch(l){"onpopstate"===n&&(q("popstate",r=function(){D("popstate",r,y);var t=e.onpopstate;e.onpopstate=v,setTimeout(function(){e.onpopstate=t},1)},y),W=0)}e[n]=p}else try{try{var h=_.create(e);I(_.getPrototypeOf(h)===e?h:e,n,r);for(var d in e)"function"==typeof e[d]&&(h[d]=e[d].bind(e));try{i.call(h,h,e)}catch(E){}e=h}catch(b){I(e.constructor.prototype,n,r)}}catch(x){return y}}return e}function a(e,t,n){return n=n||{},e=e===Z?S:e,n.set=n.set||function(n){e[t]=n},n.get=n.get||function(){return e[t]},n}function o(e,t,n){e in K?K[e].push(t):3<arguments.length?q(e,t,n,arguments[3]):q(e,t,n)}function c(e,t,n){var r=K[e];if(r){for(e=r.length;e--;)if(r[e]===t){r.splice(e,1);break}}else D(e,t,n)}function f(e,n){var r=(""+("string"==typeof e?e:e.type)).replace(/^on/,""),a=K[r];if(a){if(n="string"==typeof e?n:e,n.target==v)for(var o=["target","currentTarget","srcElement","type"];e=o.pop();)n=i(n,e,{get:"type"===e?function(){return r}:function(){return m}});W&&(("popstate"===r?m.onpopstate:m.onhashchange)||t).call(m,n);for(var o=0,c=a.length;c>o;o++)a[o].call(m,n);return g}return G(e,n)}function s(){var e=b.createEvent?b.createEvent("Event"):b.createEventObject();e.initEvent?e.initEvent("popstate",y,y):e.type="popstate",e.state=j.state,f(e)}function p(e,t,r,i){T?J=S.href:(0===F&&(F=2),t=n(t,2===F&&-1!==(""+t).indexOf("#")),t.c!==n().c&&(J=i,r?S.replace("#"+t.f):S.hash=t.f)),!$&&e&&(H[S.href]=e),z=y}function u(e){var t=J;if(J=S.href,t){M!==S.href&&s();var e=e||m.event,t=n(t,g),r=n();e.oldURL||(e.oldURL=t.b,e.newURL=r.b),t.a!==r.a&&f(e)}}function l(e){setTimeout(function(){q("popstate",function(e){M=S.href,$||(e=i(e,"state",{get:function(){return j.state}})),f(e)},y)},0),!T&&e!==g&&"location"in j&&(d(L.hash),z&&(z=y,s()))}function h(e){var t,e=e||m.event;e:{for(t=e.target||e.srcElement;t;){if("A"===t.nodeName)break e;t=t.parentNode}t=void 0}var r="defaultPrevented"in e?e.defaultPrevented:e.returnValue===y;t&&"A"===t.nodeName&&!r&&(r=n(),t=n(t.getAttribute("href",2)),r.b.split("#").shift()===t.b.split("#").shift()&&t.a&&(r.a!==t.a&&(L.hash=t.a),d(t.a),e.preventDefault?e.preventDefault():e.returnValue=y))}function d(e){var t=b.getElementById(e=(e||"").replace(/^#/,""));t&&t.id===e&&"A"===t.nodeName&&(e=t.getBoundingClientRect(),m.scrollTo(x.scrollLeft||0,e.top+(x.scrollTop||0)-(x.clientTop||0)))}var g=!0,v=null,y=!1,m=("object"==typeof window?window:this)||{};if(!m.history||"emulate"in m.history)return m.history;var E,b=m.document,x=b.documentElement,_=m.Object,O=m.JSON,S=m.location,w=m.history,j=w,A=w.pushState,R=w.replaceState,T=function(){var e=m.navigator.userAgent;return-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone")?!!A:y}(),$="state"in w,I=_.defineProperty,L=i({},"t")?{}:b.createElement("a"),P="",N=m.addEventListener?"addEventListener":(P="on")&&"attachEvent",k=m.removeEventListener?"removeEventListener":"detachEvent",B=m.dispatchEvent?"dispatchEvent":"fireEvent",q=m[N],D=m[k],G=m[B],U={basepath:"/",redirect:0,type:"/",init:0},V="__historyAPI__",C=b.createElement("a"),J=S.href,M="",W=1,z=y,F=0,H={},K={},Q=b.title,X={onhashchange:v,onpopstate:v},Y={setup:function(e,t,n){U.basepath=(""+(e==v?U.basepath:e)).replace(/(?:^|\/)[^\/]*$/,"/"),U.type=t==v?U.type:t,U.redirect=n==v?U.redirect:!!n},redirect:function(e,t){if(j.setup(t,e),t=U.basepath,m.top==m.self){var r=n(v,y,g).c,i=S.pathname+S.search;T?(i=i.replace(/([^\/])$/,"$1/"),r!=t&&RegExp("^"+t+"$","i").test(i)&&S.replace(r)):i!=t&&(i=i.replace(/([^\/])\?/,"$1/?"),RegExp("^"+t,"i").test(i)&&S.replace(t+"#"+i.replace(RegExp("^"+t,"i"),U.type)+S.hash))}},pushState:function(t,n,r){var i=b.title;Q!=v&&(b.title=Q),A&&e(A,arguments),p(t,r),b.title=i,Q=n},replaceState:function(t,n,r){var i=b.title;Q!=v&&(b.title=Q),delete H[S.href],R&&e(R,arguments),p(t,r,g),b.title=i,Q=n},location:{set:function(e){0===F&&(F=1),m.location=e},get:function(){return 0===F&&(F=1),L}},state:{get:function(){return"object"==typeof H[S.href]?O.parse(O.stringify(H[S.href])):"undefined"!=typeof H[S.href]?H[S.href]:v}}},Z={assign:function(e){T||0!==(""+e).indexOf("#")?S.assign(e):p(v,e)},reload:function(e){S.reload(e)},replace:function(e){T||0!==(""+e).indexOf("#")?S.replace(e):p(v,e,g)},toString:function(){return this.href},origin:{get:function(){return void 0!==E?E:S.origin?S.origin:S.protocol+"//"+S.hostname+(S.port?":"+S.port:"")},set:function(e){E=e}},href:T?v:{get:function(){return n().b}},protocol:v,host:v,hostname:v,port:v,pathname:T?v:{get:function(){return n().d}},search:T?v:{get:function(){return n().e}},hash:T?v:{set:function(e){p(v,(""+e).replace(/^(#|)/,"#"),y,J)},get:function(){return n().a}}};return function(){var e=b.getElementsByTagName("script"),e=(e[e.length-1]||{}).src||"";(-1!==e.indexOf("?")?e.split("?").pop():"").replace(/(\w+)(?:=([^&]*))?/g,function(e,t,n){U[t]=(n||"").replace(/^(0|false)$/,"")}),q(P+"hashchange",u,y);var t=[Z,L,X,m,Y,j];$&&delete Y.state;for(var o=0;o<t.length;o+=2)for(var c in t[o])if(t[o].hasOwnProperty(c))if("object"!=typeof t[o][c])t[o+1][c]=t[o][c];else{if(e=a(t[o],c,t[o][c]),!i(t[o+1],c,e,function(e,n){n===j&&(m.history=j=t[o+1]=e)}))return D(P+"hashchange",u,y),y;t[o+1]===m&&(K[c]=K[c.substr(2)]=[])}return j.setup(),U.redirect&&j.redirect(),U.init&&(F=1),!$&&O&&r(),T||b[N](P+"click",h,y),"complete"===b.readyState?l(g):(!T&&n().c!==U.basepath&&(z=g),q(P+"load",l,y)),g}()?(j.emulate=!T,m[N]=o,m[k]=c,m[B]=f,j):void 0});