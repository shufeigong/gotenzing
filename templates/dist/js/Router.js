var Router={routes:[],mode:null,root:"/",config:function(t){return this.mode=t&&t.mode&&"history"==t.mode&&history.pushState?"history":"hash",this.root=t&&t.root?"/"+this.clearSlashes(t.root)+"/":"/",this},getFragment:function(){var t="";if("history"===this.mode)t=this.clearSlashes(decodeURI(location.pathname+location.search)),t=t.replace(/\?(.*)$/,""),t="/"!=this.root?t.replace(this.root,""):t;else{var e=window.location.href.match(/#(.*)$/);t=e?e[1]:""}return this.clearSlashes(t)},clearSlashes:function(t){return t.toString().replace(/\/$/,"").replace(/^\//,"")},add:function(t,e){return"function"==typeof t&&(e=t,t=""),this.routes.push({re:t,handler:e}),this},remove:function(t){for(var e,r=0;r<this.routes.length,e=this.routes[r];r++)if(e.handler===t||e.re.toString()===t.toString())return this.routes.splice(r,1),this;return this},flush:function(){return this.routes=[],this.mode=null,this.root="/",this},check:function(t){for(var e=t||this.getFragment(),r=0;r<this.routes.length;r++){var i=e.match(this.routes[r].re);if(i)return i.shift(),this.routes[r].handler.apply({},i),this}return this},listen:function(){var t=this,e=t.getFragment(),r=function(){e!==t.getFragment()&&(e=t.getFragment(),t.check(e))};return clearInterval(this.interval),this.interval=setInterval(r,50),this},navigate:function(t){return t=t?t:"","history"===this.mode?history.pushState(null,null,this.root+this.clearSlashes(t)):window.location.href=window.location.href.replace(/#(.*)$/,"")+"#"+t,this}};